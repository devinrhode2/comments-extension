<h1>KissMetrics in Chrome Extensions</h1>
<p>To use KissMetrics in Chrome Extensions, we made a script that magically patches the JavaScript api for use everywhere within Chrome Extensions. You simply include it in your background page and content scripts, and call <code>_kmq.push</code> like normal.</p>
Download the patch script here: <a href="kiss-include.js">kiss-include.js</a><!-- link this to the script obviously -->
<h3>Important points</h3>
<ul>
  <li>To use in content scripts, you also need to include it in the background page.</li>
  <li>
    For efficiency, include our script after all your scripts. Just be sure to declare <code>_kmq</code> like so:
    <pre><code>  if (typeof _kmq === 'undefined') {
    window._kmq = [];
  }</code></pre>
  </li>
  <li>
    At the top of <code>kiss-include.js</code>, you'll find these two blocks to plugin in your metrics ID:
    <pre><code>  /**************************************/
  /** PLUGIN YOU KMK METRICS ID BELOW  **/
  /**************************************/
  if (typeof _kmk === 'undefined') {
    window._kmk = 'b168da9e6287ffbcfe92a883fc3c8c0f904e7972';
  }
  
  /***********************/
  /** Set a domain here **/
  /***********************/
  window.KM_COOKIE_DOMAIN = 'www.mydomain.com';</code>
    </pre>
    <p>You can get this id just below the fold on <a href="https://www.kissmetrics.com/settings">this page.</a></p>
  </li>
  <li>
    Wait, no, you're done! Just those three things to watch for. You should not use the normal JavaScript given for pages.
  </li>
</ul>

<br>
<br>
<strong>Extra details on the script</strong>
<p>Wherever you include the script, it detects it's environment and responds accordingly. This script alleviates the headache associated with chrome's isolated world's - you just use the JS API as defined in the docs.</p>
<strong>Including in content scripts</strong>
<p>To work in content scripts, you need to make sure it's also included in the background page</p>
<pre><code>  //in you manifest.json:
  "content_scripts": [
     {
        "js": [ "YourScripts.js", "kiss-include.js" ],
        "matches": [ "&lt;all_urls&gt;" ],
        "run_at": "document_start"
     },
  ],
  </code></pre>


<strong>Including in background page:</strong>
<pre><code>  //in your background.html:
  &lt;script src="kiss-include.js"&gt;&lt;/script&gt;
  </code>
</pre>
